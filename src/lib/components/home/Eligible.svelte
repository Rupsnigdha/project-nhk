<script>
	import { gsap } from 'gsap';
	import { onMount } from 'svelte';

	const eligibleTypes = [
		{ id: 1, name: 'entrepreneurs ðŸ’¡' },
		{ id: 2, name: 'artists ðŸŽ¨' },
		{ id: 3, name: 'science geeks ðŸ§ª' },
		{ id: 4, name: 'sportsperson âš½' },
		{ id: 5, name: 'crafters ðŸ§µ' },
		{ id: 6, name: 'coders ðŸ§‘ðŸ»â€ðŸ’»' },
		{ id: 7, name: 'musicians ðŸŽ¤' }
	];
	let eligibleContainer, eligibleLine, eligibleDesc;
	let eligibleTl1 = gsap.timeline();
	let eligibleTl2 = gsap.timeline();
	let eligibleTl3 = gsap.timeline();

	onMount(() => {
		let eligibleTypesAnimation = document.querySelectorAll('.eligible-types');
		const observer = new IntersectionObserver((entries) => {
			entries.forEach(
				(entry) => {
					if (entry.isIntersecting) {
						eligibleTl1.fromTo(
							eligibleLine,
							{ x: '-50px', opacity: 0 },
							{ x: 0, opacity: 1, duration: 1 }
						);
						eligibleTl2.fromTo(
							eligibleTypesAnimation[0],
							{ y: -10, opacity: 0 },
							{ y: 0, opacity: 1, duration: 0.5 }
						);
						eligibleTl2.fromTo(
							eligibleTypesAnimation[1],
							{ y: -10, opacity: 0 },
							{ y: 0, opacity: 1, duration: 0.5 }
						);
						eligibleTl2.fromTo(
							eligibleTypesAnimation[2],
							{ y: -10, opacity: 0 },
							{ y: 0, opacity: 1, duration: 0.5 }
						);
						eligibleTl2.fromTo(
							eligibleTypesAnimation[3],
							{ y: -10, opacity: 0 },
							{ y: 0, opacity: 1, duration: 0.5 }
						);
						eligibleTl2.fromTo(
							eligibleTypesAnimation[4],
							{ y: -10, opacity: 0 },
							{ y: 0, opacity: 1, duration: 0.5 }
						);
						eligibleTl2.fromTo(
							eligibleTypesAnimation[5],
							{ y: -10, opacity: 0 },
							{ y: 0, opacity: 1, duration: 0.5 }
						);
						eligibleTl2.fromTo(
							eligibleTypesAnimation[6],
							{ y: -10, opacity: 0 },
							{ y: 0, opacity: 1, duration: 0.5 }
						);
						eligibleTl3.fromTo(
							eligibleDesc,
							{ y: 50, opacity: 0 },
							{ y: 0, opacity: 1, duration: 1 }
						);
						observer.unobserve(entry.target);
					}
				},
				{
					threshold: 0.2
				}
			);
		});
		observer.observe(eligibleContainer);
	});
</script>

<div class="flex flex-col items-center justify-center bg-primary" bind:this={eligibleContainer}>
	<div class="max-w-6xl py-12 pb-32 lg:pb-48">
		<div class="text-2xl font text-white px-4 mb-4 opacity-0" bind:this={eligibleLine}>
			the <span class="font-bold">nhk</span> scholarship is for
		</div>
		<div class="flex flex-wrap px-4 lg:w-[60%]">
			{#each eligibleTypes as type}
				<span
					class="bg-white mr-2 mb-2 px-2 py-1 text-lg font-semibold text-secondary rounded eligible-types"
					>{type.name}</span
				>
			{/each}
		</div>
		<div class="text-white px-4 lg:w-[50%]" bind:this={eligibleDesc}>
			and literally anyone and everyone who wants to thrive in their respective discipline(s),
			learn, experiment, try new things, fail, and try again.
		</div>
		<button
			class="btn text-white font-bold sbtn-xs border-none bg-secondary mt-4 sm:btn-sm md:btn-md hover:bg-white hover:text-secondary hover:border-secondary
			mx-4"
			onclick="window.location.href='/posts/about-project-naharkatia'">Learn More</button
		>
	</div>
</div>
